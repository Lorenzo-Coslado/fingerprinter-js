<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test FingerprintJS Local</title>
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .result {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        font-family: monospace;
        word-break: break-all;
      }
      button {
        background: #007acc;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #005999;
      }
      pre {
        background: #f8f8f8;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <h1>üîç Test FingerprintJS</h1>

    <p>Page de test simple pour le d√©veloppement local.</p>

    <button onclick="testFingerprint()">G√©n√©rer Empreinte</button>
    <button onclick="testComponents()">Voir Composants</button>

    <div id="output"></div>

    <script src="dist/index.umd.js"></script>
    <script>
      async function testFingerprint() {
        try {
          console.log("Generating fingerprint...");
          const result = await FingerprintJS.default.generate();

          document.getElementById("output").innerHTML = `
                    <div class="result">
                        <h3>üéØ Empreinte g√©n√©r√©e</h3>
                        <p><strong>Hash:</strong> ${result.fingerprint}</p>
                        <p><strong>Confiance:</strong> ${result.confidence}%</p>
                        <p><strong>Nombre de composants:</strong> ${
                          Object.keys(result.components).length
                        }</p>
                    </div>
                `;

          console.log("Fingerprint result:", result);
        } catch (error) {
          console.error("Error:", error);
          document.getElementById("output").innerHTML = `
                    <div class="result" style="background: #ffe6e6;">
                        <h3>‚ùå Erreur</h3>
                        <p>${error.message}</p>
                    </div>
                `;
        }
      }

      async function testComponents() {
        try {
          const fp = new FingerprintJS.Fingerprint();
          const components = await fp.getComponents();

          document.getElementById("output").innerHTML = `
                    <div class="result">
                        <h3>üìä Composants d√©taill√©s</h3>
                        <pre>${JSON.stringify(components, null, 2)}</pre>
                    </div>
                `;

          console.log("Components:", components);
        } catch (error) {
          console.error("Error:", error);
          document.getElementById("output").innerHTML = `
                    <div class="result" style="background: #ffe6e6;">
                        <h3>‚ùå Erreur</h3>
                        <p>${error.message}</p>
                    </div>
                `;
        }
      }

      // Test au chargement de la page
      console.log("FingerprintJS loaded:", typeof FingerprintJS);
      console.log(
        "Available collectors:",
        FingerprintJS.default.getAvailableCollectors()
      );
    </script>
  </body>
</html>
